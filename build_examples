#!/bin/sh

VERSION=0.12

cd ../three-d

for EXAMPLE in triangle fireworks shapes2d shapes screen volume texture mandelbrot logo image fog picking normals wireframe sprites forest environment pbr lighting lights statues
do 
    export THREE_D_SCREENSHOT="../asny.github.io/three-d/$VERSION/$EXAMPLE.png"
    if [ $EXAMPLE == fireworks ]; then
        export THREE_D_EXIT=1500
    else
        export THREE_D_EXIT=0
    fi
    cargo run --example $EXAMPLE --release
    wasm-pack build examples/$EXAMPLE --target web --out-name $EXAMPLE --out-dir ../../../asny.github.io/three-d/$VERSION
done

mkdir ../asny.github.io/three-d/$VERSION/examples
mkdir ../asny.github.io/three-d/$VERSION/examples/assets
cp -R examples/assets/ ../asny.github.io/three-d/$VERSION/examples/assets/

cd ../asny.github.io
rm three-d/$VERSION/.gitignore
rm three-d/$VERSION/*.d.ts